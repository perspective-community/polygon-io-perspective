(()=>{var t={345:t=>{t.exports.Z={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric"},null_value:-1}}}},572:(t,e,n)=>{const r=n(345).Z;function i(t){return t&&"object"==typeof t&&!Array.isArray(t)}function o(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];if(!n.length)return t;const a=n.shift();if(i(t)&&i(a))for(const e in a)i(a[e])?(t[e]||Object.assign(t,{[e]:{}}),o(t[e],a[e])):Object.assign(t,{[e]:a[e]});return o(t,...n)}t.exports.get_types=function(){return Object.keys(t.exports.get_config().types)},t.exports.get_type_config=function(e){const n={};if(t.exports.get_config().types[e]&&Object.assign(n,t.exports.get_config().types[e]),n.type){const e=t.exports.get_type_config(n.type);return Object.assign(e,n),e}return n},n.g.__PERSPECTIVE_CONFIG__=void 0,t.exports.override_config=function(t){n.g.__PERSPECTIVE_CONFIG__&&console.warn("Config already initialized!"),n.g.__PERSPECTIVE_CONFIG__=o(r,t)},t.exports.get_config=function(){return n.g.__PERSPECTIVE_CONFIG__||(n.g.__PERSPECTIVE_CONFIG__=o(r,{types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric"},null_value:-1}}}||{})),n.g.__PERSPECTIVE_CONFIG__}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";var t,e={};n.r(e),n.d(e,{COLUMN_SEPARATOR_STRING:()=>g,CONFIG_ALIASES:()=>o,CONFIG_VALID_KEYS:()=>a,DATA_TYPES:()=>i,FILTER_OPERATORS:()=>d,SORT_ORDERS:()=>l,SORT_ORDER_IDS:()=>c,TYPE_AGGREGATES:()=>f,TYPE_FILTERS:()=>y});const r=(t="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0,function(e){var n,r,i=void 0!==(e=e||{})?e:{};i.ready=new Promise((function(t,e){n=t,r=e}));var o,a={};for(o in i)i.hasOwnProperty(o)&&(a[o]=i[o]);var s,u=[],l="./this.program",c=function(t,e){throw e},f="";f=self.location.href,t&&(f=t),f=0!==f.indexOf("blob:")?f.substr(0,f.lastIndexOf("/")+1):"",s=function(t){var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)};var d,p=i.print||console.log.bind(console),h=i.printErr||console.warn.bind(console);for(o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);a=null,i.arguments&&(u=i.arguments),i.thisProgram&&(l=i.thisProgram),i.quit&&(c=i.quit),i.wasmBinary&&(d=i.wasmBinary);var _,m=i.noExitRuntime||!0;"object"!=typeof WebAssembly&&tt("no native wasm support detected");var g,y=!1,v="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0;function w(t,e,n){for(var r=(e>>>=0)+n,i=e;t[i>>>0]&&!(i>=r);)++i;if(i-e>16&&t.subarray&&v)return v.decode(t.subarray(e>>>0,i>>>0));for(var o="";e<i;){var a=t[e++>>>0];if(128&a){var s=63&t[e++>>>0];if(192!=(224&a)){var u=63&t[e++>>>0];if((a=224==(240&a)?(15&a)<<12|s<<6|u:(7&a)<<18|s<<12|u<<6|63&t[e++>>>0])<65536)o+=String.fromCharCode(a);else{var l=a-65536;o+=String.fromCharCode(55296|l>>10,56320|1023&l)}}else o+=String.fromCharCode((31&a)<<6|s)}else o+=String.fromCharCode(a)}return o}function b(t,e){return(t>>>=0)?w(O,t,e):""}function T(t,e,n,r){if(!(r>0))return 0;for(var i=n>>>=0,o=n+r-1,a=0;a<t.length;++a){var s=t.charCodeAt(a);if(s>=55296&&s<=57343&&(s=65536+((1023&s)<<10)|1023&t.charCodeAt(++a)),s<=127){if(n>=o)break;e[n++>>>0]=s}else if(s<=2047){if(n+1>=o)break;e[n++>>>0]=192|s>>6,e[n++>>>0]=128|63&s}else if(s<=65535){if(n+2>=o)break;e[n++>>>0]=224|s>>12,e[n++>>>0]=128|s>>6&63,e[n++>>>0]=128|63&s}else{if(n+3>=o)break;e[n++>>>0]=240|s>>18,e[n++>>>0]=128|s>>12&63,e[n++>>>0]=128|s>>6&63,e[n++>>>0]=128|63&s}}return e[n>>>0]=0,n-i}function C(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r>=55296&&r<=57343&&(r=65536+((1023&r)<<10)|1023&t.charCodeAt(++n)),r<=127?++e:e+=r<=2047?2:r<=65535?3:4}return e}var P,k,O,$,E,A,x,j,D,S="undefined"!=typeof TextDecoder?new TextDecoder("utf-16le"):void 0;function F(t,e){for(var n=t,r=n>>1,i=r+e/2;!(r>=i)&&E[r>>>0];)++r;if((n=r<<1)-t>32&&S)return S.decode(O.subarray(t>>>0,n>>>0));for(var o="",a=0;!(a>=e/2);++a){var s=$[t+2*a>>>1];if(0==s)break;o+=String.fromCharCode(s)}return o}function R(t,e,n){if(void 0===n&&(n=2147483647),n<2)return 0;for(var r=e,i=(n-=2)<2*t.length?n/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);$[e>>>1]=a,e+=2}return $[e>>>1]=0,e-r}function V(t){return 2*t.length}function M(t,e){for(var n=0,r="";!(n>=e/4);){var i=A[t+4*n>>>2];if(0==i)break;if(++n,i>=65536){var o=i-65536;r+=String.fromCharCode(55296|o>>10,56320|1023&o)}else r+=String.fromCharCode(i)}return r}function N(t,e,n){if(void 0===n&&(n=2147483647),n<4)return 0;for(var r=e>>>=0,i=r+n-4,o=0;o<t.length;++o){var a=t.charCodeAt(o);if(a>=55296&&a<=57343&&(a=65536+((1023&a)<<10)|1023&t.charCodeAt(++o)),A[e>>>2]=a,(e+=4)+4>i)break}return A[e>>>2]=0,e-r}function I(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r>=55296&&r<=57343&&++n,e+=4}return e}function W(t){var e=C(t)+1,n=Se(e);return n&&T(t,k,n,e),n}function z(t){var e=C(t)+1,n=We(e);return T(t,k,n,e),n}function U(t){P=t,i.HEAP8=k=new Int8Array(t),i.HEAP16=$=new Int16Array(t),i.HEAP32=A=new Int32Array(t),i.HEAPU8=O=new Uint8Array(t),i.HEAPU16=E=new Uint16Array(t),i.HEAPU32=x=new Uint32Array(t),i.HEAPF32=j=new Float32Array(t),i.HEAPF64=D=new Float64Array(t)}i.INITIAL_MEMORY;var Y,H=[],q=[],L=[],G=[];function J(){return m||!1}var B,X,Z=0,K=null,Q=null;function tt(t){i.onAbort&&i.onAbort(t),h(t+=""),y=!0,g=1,t="abort("+t+"). Build with -s ASSERTIONS=1 for more info.";var e=new WebAssembly.RuntimeError(t);throw r(e),e}function et(t){return t.startsWith("data:application/octet-stream;base64,")}function nt(t){try{if(t==B&&d)return new Uint8Array(d);if(s)return s(t);throw"both async and sync fetching of the wasm failed"}catch(t){tt(t)}}i.preloadedImages={},i.preloadedAudios={},et(B="perspective.cpp.wasm")||(X=B,B=i.locateFile?i.locateFile(X,f):f+X);var rt={797484:function(){if("undefined"!=typeof self)try{if(self.dispatchEvent&&!self._perspective_initialized&&null!==self.document){self._perspective_initialized=!0;var t=self.document.createEvent("Event");t.initEvent("perspective-ready",!1,!0),self.dispatchEvent(t)}else!self.document&&self.postMessage&&self.postMessage({})}catch(t){}},797869:function(t){throw new Error(b(t))}};function it(t){for(;t.length>0;){var e=t.shift();if("function"!=typeof e){var n=e.func;"number"==typeof n?void 0===e.arg?Y.get(n)():Y.get(n)(e.arg):n(void 0===e.arg?null:e.arg)}else e(i)}}function ot(t){this.excPtr=t,this.ptr=t-16,this.set_type=function(t){A[this.ptr+4>>>2]=t},this.get_type=function(){return A[this.ptr+4>>>2]},this.set_destructor=function(t){A[this.ptr+8>>>2]=t},this.get_destructor=function(){return A[this.ptr+8>>>2]},this.set_refcount=function(t){A[this.ptr>>>2]=t},this.set_caught=function(t){t=t?1:0,k[this.ptr+12>>>0]=t},this.get_caught=function(){return 0!=k[this.ptr+12>>>0]},this.set_rethrown=function(t){t=t?1:0,k[this.ptr+13>>>0]=t},this.get_rethrown=function(){return 0!=k[this.ptr+13>>>0]},this.init=function(t,e){this.set_type(t),this.set_destructor(e),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){var t=A[this.ptr>>>2];A[this.ptr>>>2]=t+1},this.release_ref=function(){var t=A[this.ptr>>>2];return A[this.ptr>>>2]=t-1,1===t}}function at(){at.called||(at.called=!0,function(){var t=(new Date).getFullYear(),e=new Date(t,0,1),n=new Date(t,6,1),r=e.getTimezoneOffset(),i=n.getTimezoneOffset(),o=Math.max(r,i);function a(t){var e=t.toTimeString().match(/\(([A-Za-z ]+)\)$/);return e?e[1]:"GMT"}A[Ie()>>>2]=60*o,A[Ne()>>>2]=Number(r!=i);var s=a(e),u=a(n),l=W(s),c=W(u);i<r?(A[Me()>>>2]=l,A[Me()+4>>>2]=c):(A[Me()>>>2]=c,A[Me()+4>>>2]=l)}())}var st={mappings:{},buffers:[null,[],[]],printChar:function(t,e){var n=st.buffers[t];0===e||10===e?((1===t?p:h)(w(n,0)),n.length=0):n.push(e)},varargs:void 0,get:function(){return st.varargs+=4,A[st.varargs-4>>>2]},getStr:function(t){return b(t)},get64:function(t,e){return t}};var ut={};function lt(t){for(;t.length;){var e=t.pop();t.pop()(e)}}function ct(t){return this.fromWireType(x[t>>>2])}var ft={},dt={},pt={};function ht(t){if(void 0===t)return"_unknown";var e=(t=t.replace(/[^a-zA-Z0-9_]/g,"$")).charCodeAt(0);return e>=48&&e<=57?"_"+t:t}function _t(t,e){return t=ht(t),new Function("body","return function "+t+'() {\n    "use strict";    return body.apply(this, arguments);\n};\n')(e)}function mt(t,e){var n=_t(e,(function(t){this.name=e,this.message=t;var n=new Error(t).stack;void 0!==n&&(this.stack=this.toString()+"\n"+n.replace(/^Error(:[^\n]*)?\n/,""))}));return n.prototype=Object.create(t.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return void 0===this.message?this.name:this.name+": "+this.message},n}var gt=void 0;function yt(t){throw new gt(t)}function vt(t,e,n){function r(e){var r=n(e);r.length!==t.length&&yt("Mismatched type converter count");for(var i=0;i<t.length;++i)kt(t[i],r[i])}t.forEach((function(t){pt[t]=e}));var i=new Array(e.length),o=[],a=0;e.forEach((function(t,e){dt.hasOwnProperty(t)?i[e]=dt[t]:(o.push(t),ft.hasOwnProperty(t)||(ft[t]=[]),ft[t].push((function(){i[e]=dt[t],++a===o.length&&r(i)})))})),0===o.length&&r(i)}function wt(t){switch(t){case 1:return 0;case 2:return 1;case 4:return 2;case 8:return 3;default:throw new TypeError("Unknown type size: "+t)}}var bt=void 0;function Tt(t){for(var e="",n=t;O[n>>>0];)e+=bt[O[n++>>>0]];return e}var Ct=void 0;function Pt(t){throw new Ct(t)}function kt(t,e,n){if(n=n||{},!("argPackAdvance"in e))throw new TypeError("registerType registeredInstance requires argPackAdvance");var r=e.name;if(t||Pt('type "'+r+'" must have a positive integer typeid pointer'),dt.hasOwnProperty(t)){if(n.ignoreDuplicateRegistrations)return;Pt("Cannot register type '"+r+"' twice")}if(dt[t]=e,delete pt[t],ft.hasOwnProperty(t)){var i=ft[t];delete ft[t],i.forEach((function(t){t()}))}}function Ot(t){Pt(t.$$.ptrType.registeredClass.name+" instance already deleted")}var $t=!1;function Et(t){}function At(t){t.count.value-=1,0===t.count.value&&function(t){t.smartPtr?t.smartPtrType.rawDestructor(t.smartPtr):t.ptrType.registeredClass.rawDestructor(t.ptr)}(t)}function xt(t){return"undefined"==typeof FinalizationGroup?(xt=function(t){return t},t):($t=new FinalizationGroup((function(t){for(var e=t.next();!e.done;e=t.next()){var n=e.value;n.ptr?At(n):console.warn("object already deleted: "+n.ptr)}})),xt=function(t){return $t.register(t,t.$$,t.$$),t},Et=function(t){$t.unregister(t.$$)},xt(t))}var jt=void 0,Dt=[];function St(){for(;Dt.length;){var t=Dt.pop();t.$$.deleteScheduled=!1,t.delete()}}function Ft(){}var Rt={};function Vt(t,e,n){if(void 0===t[e].overloadTable){var r=t[e];t[e]=function(){return t[e].overloadTable.hasOwnProperty(arguments.length)||Pt("Function '"+n+"' called with an invalid number of arguments ("+arguments.length+") - expects one of ("+t[e].overloadTable+")!"),t[e].overloadTable[arguments.length].apply(this,arguments)},t[e].overloadTable=[],t[e].overloadTable[r.argCount]=r}}function Mt(t,e,n){i.hasOwnProperty(t)?((void 0===n||void 0!==i[t].overloadTable&&void 0!==i[t].overloadTable[n])&&Pt("Cannot register public name '"+t+"' twice"),Vt(i,t,t),i.hasOwnProperty(n)&&Pt("Cannot register multiple overloads of a function with the same number of arguments ("+n+")!"),i[t].overloadTable[n]=e):(i[t]=e,void 0!==n&&(i[t].numArguments=n))}function Nt(t,e,n,r,i,o,a,s){this.name=t,this.constructor=e,this.instancePrototype=n,this.rawDestructor=r,this.baseClass=i,this.getActualType=o,this.upcast=a,this.downcast=s,this.pureVirtualFunctions=[]}function It(t,e,n){for(;e!==n;)e.upcast||Pt("Expected null or instance of "+n.name+", got an instance of "+e.name),t=e.upcast(t),e=e.baseClass;return t}function Wt(t,e){if(null===e)return this.isReference&&Pt("null is not a valid "+this.name),0;e.$$||Pt('Cannot pass "'+ue(e)+'" as a '+this.name),e.$$.ptr||Pt("Cannot pass deleted object as a pointer of type "+this.name);var n=e.$$.ptrType.registeredClass;return It(e.$$.ptr,n,this.registeredClass)}function zt(t,e){var n;if(null===e)return this.isReference&&Pt("null is not a valid "+this.name),this.isSmartPointer?(n=this.rawConstructor(),null!==t&&t.push(this.rawDestructor,n),n):0;e.$$||Pt('Cannot pass "'+ue(e)+'" as a '+this.name),e.$$.ptr||Pt("Cannot pass deleted object as a pointer of type "+this.name),!this.isConst&&e.$$.ptrType.isConst&&Pt("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);var r=e.$$.ptrType.registeredClass;if(n=It(e.$$.ptr,r,this.registeredClass),this.isSmartPointer)switch(void 0===e.$$.smartPtr&&Pt("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:e.$$.smartPtrType===this?n=e.$$.smartPtr:Pt("Cannot convert argument of type "+(e.$$.smartPtrType?e.$$.smartPtrType.name:e.$$.ptrType.name)+" to parameter type "+this.name);break;case 1:n=e.$$.smartPtr;break;case 2:if(e.$$.smartPtrType===this)n=e.$$.smartPtr;else{var i=e.clone();n=this.rawShare(n,oe((function(){i.delete()}))),null!==t&&t.push(this.rawDestructor,n)}break;default:Pt("Unsupporting sharing policy")}return n}function Ut(t,e){if(null===e)return this.isReference&&Pt("null is not a valid "+this.name),0;e.$$||Pt('Cannot pass "'+ue(e)+'" as a '+this.name),e.$$.ptr||Pt("Cannot pass deleted object as a pointer of type "+this.name),e.$$.ptrType.isConst&&Pt("Cannot convert argument of type "+e.$$.ptrType.name+" to parameter type "+this.name);var n=e.$$.ptrType.registeredClass;return It(e.$$.ptr,n,this.registeredClass)}function Yt(t,e,n){if(e===n)return t;if(void 0===n.baseClass)return null;var r=Yt(t,e,n.baseClass);return null===r?null:n.downcast(r)}var Ht={};function qt(t,e){return e.ptrType&&e.ptr||yt("makeClassHandle requires ptr and ptrType"),!!e.smartPtrType!=!!e.smartPtr&&yt("Both smartPtrType and smartPtr must be specified"),e.count={value:1},xt(Object.create(t,{$$:{value:e}}))}function Lt(t,e,n,r,i,o,a,s,u,l,c){this.name=t,this.registeredClass=e,this.isReference=n,this.isConst=r,this.isSmartPointer=i,this.pointeeType=o,this.sharingPolicy=a,this.rawGetPointee=s,this.rawConstructor=u,this.rawShare=l,this.rawDestructor=c,i||void 0!==e.baseClass?this.toWireType=zt:r?(this.toWireType=Wt,this.destructorFunction=null):(this.toWireType=Ut,this.destructorFunction=null)}function Gt(t,e,n){i.hasOwnProperty(t)||yt("Replacing nonexistant public symbol"),void 0!==i[t].overloadTable&&void 0!==n?i[t].overloadTable[n]=e:(i[t]=e,i[t].argCount=n)}function Jt(t,e,n){return t.includes("j")?function(t,e,n){var r=i["dynCall_"+t];return n&&n.length?r.apply(null,[e].concat(n)):r.call(null,e)}(t,e,n):Y.get(e).apply(null,n)}function Bt(t,e){var n,r,i,o=(t=Tt(t)).includes("j")?(n=t,r=e,i=[],function(){i.length=arguments.length;for(var t=0;t<arguments.length;t++)i[t]=arguments[t];return Jt(n,r,i)}):Y.get(e);return"function"!=typeof o&&Pt("unknown function pointer with signature "+t+": "+e),o}var Xt=void 0;function Zt(t){var e=Ve(t),n=Tt(e);return Fe(e),n}function Kt(t,e){var n=[],r={};throw e.forEach((function t(e){r[e]||dt[e]||(pt[e]?pt[e].forEach(t):(n.push(e),r[e]=!0))})),new Xt(t+": "+n.map(Zt).join([", "]))}function Qt(t,e){for(var n=[],r=0;r<t;r++)n.push(A[(e>>2)+r>>>0]);return n}function te(t,e){if(!(t instanceof Function))throw new TypeError("new_ called with constructor type "+typeof t+" which is not a function");var n=_t(t.name||"unknownFunctionName",(function(){}));n.prototype=t.prototype;var r=new n,i=t.apply(r,e);return i instanceof Object?i:r}function ee(t,e,n,r,i){var o=e.length;o<2&&Pt("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var a=null!==e[1]&&null!==n,s=!1,u=1;u<e.length;++u)if(null!==e[u]&&void 0===e[u].destructorFunction){s=!0;break}var l="void"!==e[0].name,c="",f="";for(u=0;u<o-2;++u)c+=(0!==u?", ":"")+"arg"+u,f+=(0!==u?", ":"")+"arg"+u+"Wired";var d="return function "+ht(t)+"("+c+") {\nif (arguments.length !== "+(o-2)+") {\nthrowBindingError('function "+t+" called with ' + arguments.length + ' arguments, expected "+(o-2)+" args!');\n}\n";s&&(d+="var destructors = [];\n");var p=s?"destructors":"null",h=["throwBindingError","invoker","fn","runDestructors","retType","classParam"],_=[Pt,r,i,lt,e[0],e[1]];for(a&&(d+="var thisWired = classParam.toWireType("+p+", this);\n"),u=0;u<o-2;++u)d+="var arg"+u+"Wired = argType"+u+".toWireType("+p+", arg"+u+"); // "+e[u+2].name+"\n",h.push("argType"+u),_.push(e[u+2]);if(a&&(f="thisWired"+(f.length>0?", ":"")+f),d+=(l?"var rv = ":"")+"invoker(fn"+(f.length>0?", ":"")+f+");\n",s)d+="runDestructors(destructors);\n";else for(u=a?1:2;u<e.length;++u){var m=1===u?"thisWired":"arg"+(u-2)+"Wired";null!==e[u].destructorFunction&&(d+=m+"_dtor("+m+"); // "+e[u].name+"\n",h.push(m+"_dtor"),_.push(e[u].destructorFunction))}return l&&(d+="var ret = retType.fromWireType(rv);\nreturn ret;\n"),d+="}\n",h.push(d),te(Function,h).apply(null,_)}var ne=[],re=[{},{value:void 0},{value:null},{value:!0},{value:!1}];function ie(t){t>4&&0==--re[t].refcount&&(re[t]=void 0,ne.push(t))}function oe(t){switch(t){case void 0:return 1;case null:return 2;case!0:return 3;case!1:return 4;default:var e=ne.length?ne.pop():re.length;return re[e]={refcount:1,value:t},e}}function ae(t,e,n){switch(e){case 0:return function(t){var e=n?k:O;return this.fromWireType(e[t>>>0])};case 1:return function(t){var e=n?$:E;return this.fromWireType(e[t>>>1])};case 2:return function(t){var e=n?A:x;return this.fromWireType(e[t>>>2])};default:throw new TypeError("Unknown integer type: "+t)}}function se(t,e){var n=dt[t];return void 0===n&&Pt(e+" has unknown type "+Zt(t)),n}function ue(t){if(null===t)return"null";var e=typeof t;return"object"===e||"array"===e||"function"===e?t.toString():""+t}function le(t,e){switch(e){case 2:return function(t){return this.fromWireType(j[t>>>2])};case 3:return function(t){return this.fromWireType(D[t>>>3])};default:throw new TypeError("Unknown float type: "+t)}}function ce(t,e,n){switch(e){case 0:return n?function(t){return k[t>>>0]}:function(t){return O[t>>>0]};case 1:return n?function(t){return $[t>>>1]}:function(t){return E[t>>>1]};case 2:return n?function(t){return A[t>>>2]}:function(t){return x[t>>>2]};default:throw new TypeError("Unknown integer type: "+t)}}function fe(t){return t||Pt("Cannot use deleted val. handle = "+t),re[t].value}function de(t,e){for(var n=new Array(t),r=0;r<t;++r)n[r]=se(A[(e>>2)+r>>>0],"parameter "+r);return n}var pe={};function he(t){var e=pe[t];return void 0===e?Tt(t):e}var _e=[];function me(){return"object"==typeof globalThis?globalThis:Function("return this")()}var ge,ye={};ge=function(){return performance.now()};var ve=[];function we(t){try{return _.grow(t-P.byteLength+65535>>>16),U(_.buffer),1}catch(t){}}var be={};function Te(){if(!Te.strings){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:("object"==typeof navigator&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:l||"./this.program"};for(var e in be)void 0===be[e]?delete t[e]:t[e]=be[e];var n=[];for(var e in t)n.push(e+"="+t[e]);Te.strings=n}return Te.strings}function Ce(t){return t%4==0&&(t%100!=0||t%400==0)}function Pe(t,e){for(var n=0,r=0;r<=e;n+=t[r++]);return n}var ke=[31,29,31,30,31,30,31,31,30,31,30,31],Oe=[31,28,31,30,31,30,31,31,30,31,30,31];function $e(t,e){for(var n=new Date(t.getTime());e>0;){var r=Ce(n.getFullYear()),i=n.getMonth(),o=(r?ke:Oe)[i];if(!(e>o-n.getDate()))return n.setDate(n.getDate()+e),n;e-=o-n.getDate()+1,n.setDate(1),i<11?n.setMonth(i+1):(n.setMonth(0),n.setFullYear(n.getFullYear()+1))}return n}function Ee(t,e,n,r){var i=A[r+40>>>2],o={tm_sec:A[r>>>2],tm_min:A[r+4>>>2],tm_hour:A[r+8>>>2],tm_mday:A[r+12>>>2],tm_mon:A[r+16>>>2],tm_year:A[r+20>>>2],tm_wday:A[r+24>>>2],tm_yday:A[r+28>>>2],tm_isdst:A[r+32>>>2],tm_gmtoff:A[r+36>>>2],tm_zone:i?b(i):""},a=b(n),s={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var u in s)a=a.replace(new RegExp(u,"g"),s[u]);var l=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=["January","February","March","April","May","June","July","August","September","October","November","December"];function f(t,e,n){for(var r="number"==typeof t?t.toString():t||"";r.length<e;)r=n[0]+r;return r}function d(t,e){return f(t,e,"0")}function p(t,e){function n(t){return t<0?-1:t>0?1:0}var r;return 0===(r=n(t.getFullYear()-e.getFullYear()))&&0===(r=n(t.getMonth()-e.getMonth()))&&(r=n(t.getDate()-e.getDate())),r}function h(t){switch(t.getDay()){case 0:return new Date(t.getFullYear()-1,11,29);case 1:return t;case 2:return new Date(t.getFullYear(),0,3);case 3:return new Date(t.getFullYear(),0,2);case 4:return new Date(t.getFullYear(),0,1);case 5:return new Date(t.getFullYear()-1,11,31);case 6:return new Date(t.getFullYear()-1,11,30)}}function _(t){var e=$e(new Date(t.tm_year+1900,0,1),t.tm_yday),n=new Date(e.getFullYear(),0,4),r=new Date(e.getFullYear()+1,0,4),i=h(n),o=h(r);return p(i,e)<=0?p(o,e)<=0?e.getFullYear()+1:e.getFullYear():e.getFullYear()-1}var m={"%a":function(t){return l[t.tm_wday].substring(0,3)},"%A":function(t){return l[t.tm_wday]},"%b":function(t){return c[t.tm_mon].substring(0,3)},"%B":function(t){return c[t.tm_mon]},"%C":function(t){return d((t.tm_year+1900)/100|0,2)},"%d":function(t){return d(t.tm_mday,2)},"%e":function(t){return f(t.tm_mday,2," ")},"%g":function(t){return _(t).toString().substring(2)},"%G":function(t){return _(t)},"%H":function(t){return d(t.tm_hour,2)},"%I":function(t){var e=t.tm_hour;return 0==e?e=12:e>12&&(e-=12),d(e,2)},"%j":function(t){return d(t.tm_mday+Pe(Ce(t.tm_year+1900)?ke:Oe,t.tm_mon-1),3)},"%m":function(t){return d(t.tm_mon+1,2)},"%M":function(t){return d(t.tm_min,2)},"%n":function(){return"\n"},"%p":function(t){return t.tm_hour>=0&&t.tm_hour<12?"AM":"PM"},"%S":function(t){return d(t.tm_sec,2)},"%t":function(){return"\t"},"%u":function(t){return t.tm_wday||7},"%U":function(t){var e=new Date(t.tm_year+1900,0,1),n=0===e.getDay()?e:$e(e,7-e.getDay()),r=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(p(n,r)<0){var i=Pe(Ce(r.getFullYear())?ke:Oe,r.getMonth()-1)-31,o=31-n.getDate()+i+r.getDate();return d(Math.ceil(o/7),2)}return 0===p(n,e)?"01":"00"},"%V":function(t){var e,n=new Date(t.tm_year+1900,0,4),r=new Date(t.tm_year+1901,0,4),i=h(n),o=h(r),a=$e(new Date(t.tm_year+1900,0,1),t.tm_yday);return p(a,i)<0?"53":p(o,a)<=0?"01":(e=i.getFullYear()<t.tm_year+1900?t.tm_yday+32-i.getDate():t.tm_yday+1-i.getDate(),d(Math.ceil(e/7),2))},"%w":function(t){return t.tm_wday},"%W":function(t){var e=new Date(t.tm_year,0,1),n=1===e.getDay()?e:$e(e,0===e.getDay()?1:7-e.getDay()+1),r=new Date(t.tm_year+1900,t.tm_mon,t.tm_mday);if(p(n,r)<0){var i=Pe(Ce(r.getFullYear())?ke:Oe,r.getMonth()-1)-31,o=31-n.getDate()+i+r.getDate();return d(Math.ceil(o/7),2)}return 0===p(n,e)?"01":"00"},"%y":function(t){return(t.tm_year+1900).toString().substring(2)},"%Y":function(t){return t.tm_year+1900},"%z":function(t){var e=t.tm_gmtoff,n=e>=0;return e=(e=Math.abs(e)/60)/60*100+e%60,(n?"+":"-")+String("0000"+e).slice(-4)},"%Z":function(t){return t.tm_zone},"%%":function(){return"%"}};for(var u in m)a.includes(u)&&(a=a.replace(new RegExp(u,"g"),m[u](o)));var g=xe(a,!1);return g.length>e?0:(function(t,e){k.set(t,e>>>0)}(g,t),g.length-1)}function Ae(t){return parseInt(t)}function xe(t,e,n){var r=n>0?n:C(t)+1,i=new Array(r),o=T(t,i,0,i.length);return e&&(i.length=o),i}gt=i.InternalError=mt(Error,"InternalError"),function(){for(var t=new Array(256),e=0;e<256;++e)t[e]=String.fromCharCode(e);bt=t}(),Ct=i.BindingError=mt(Error,"BindingError"),Ft.prototype.isAliasOf=function(t){if(!(this instanceof Ft))return!1;if(!(t instanceof Ft))return!1;for(var e=this.$$.ptrType.registeredClass,n=this.$$.ptr,r=t.$$.ptrType.registeredClass,i=t.$$.ptr;e.baseClass;)n=e.upcast(n),e=e.baseClass;for(;r.baseClass;)i=r.upcast(i),r=r.baseClass;return e===r&&n===i},Ft.prototype.clone=function(){if(this.$$.ptr||Ot(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var t,e=xt(Object.create(Object.getPrototypeOf(this),{$$:{value:(t=this.$$,{count:t.count,deleteScheduled:t.deleteScheduled,preservePointerOnDelete:t.preservePointerOnDelete,ptr:t.ptr,ptrType:t.ptrType,smartPtr:t.smartPtr,smartPtrType:t.smartPtrType})}}));return e.$$.count.value+=1,e.$$.deleteScheduled=!1,e},Ft.prototype.delete=function(){this.$$.ptr||Ot(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Pt("Object already scheduled for deletion"),Et(this),At(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},Ft.prototype.isDeleted=function(){return!this.$$.ptr},Ft.prototype.deleteLater=function(){return this.$$.ptr||Ot(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Pt("Object already scheduled for deletion"),Dt.push(this),1===Dt.length&&jt&&jt(St),this.$$.deleteScheduled=!0,this},Lt.prototype.getPointee=function(t){return this.rawGetPointee&&(t=this.rawGetPointee(t)),t},Lt.prototype.destructor=function(t){this.rawDestructor&&this.rawDestructor(t)},Lt.prototype.argPackAdvance=8,Lt.prototype.readValueFromPointer=ct,Lt.prototype.deleteObject=function(t){null!==t&&t.delete()},Lt.prototype.fromWireType=function(t){var e=this.getPointee(t);if(!e)return this.destructor(t),null;var n=function(t,e){return e=function(t,e){for(void 0===e&&Pt("ptr should not be undefined");t.baseClass;)e=t.upcast(e),t=t.baseClass;return e}(t,e),Ht[e]}(this.registeredClass,e);if(void 0!==n){if(0===n.$$.count.value)return n.$$.ptr=e,n.$$.smartPtr=t,n.clone();var r=n.clone();return this.destructor(t),r}function i(){return this.isSmartPointer?qt(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:e,smartPtrType:this,smartPtr:t}):qt(this.registeredClass.instancePrototype,{ptrType:this,ptr:t})}var o,a=this.registeredClass.getActualType(e),s=Rt[a];if(!s)return i.call(this);o=this.isConst?s.constPointerType:s.pointerType;var u=Yt(e,this.registeredClass,o.registeredClass);return null===u?i.call(this):this.isSmartPointer?qt(o.registeredClass.instancePrototype,{ptrType:o,ptr:u,smartPtrType:this,smartPtr:t}):qt(o.registeredClass.instancePrototype,{ptrType:o,ptr:u})},i.getInheritedInstanceCount=function(){return Object.keys(Ht).length},i.getLiveInheritedInstances=function(){var t=[];for(var e in Ht)Ht.hasOwnProperty(e)&&t.push(Ht[e]);return t},i.flushPendingDeletes=St,i.setDelayFunction=function(t){jt=t,Dt.length&&jt&&jt(St)},Xt=i.UnboundTypeError=mt(Error,"UnboundTypeError"),i.count_emval_handles=function(){for(var t=0,e=5;e<re.length;++e)void 0!==re[e]&&++t;return t},i.get_first_emval=function(){for(var t=5;t<re.length;++t)if(void 0!==re[t])return re[t];return null};var je,De={a:function(t,e,n,r){tt("Assertion failed: "+b(t)+", at: "+[e?b(e):"unknown filename",n,r?b(r):"unknown function"])},i:function(t){return Se(t+16)+16},j:function(t,e,n){throw new ot(t).init(e,n),t},Z:function(t,e){return function(t,e){at();var n=new Date(1e3*A[t>>>2]);A[e>>>2]=n.getSeconds(),A[e+4>>>2]=n.getMinutes(),A[e+8>>>2]=n.getHours(),A[e+12>>>2]=n.getDate(),A[e+16>>>2]=n.getMonth(),A[e+20>>>2]=n.getFullYear()-1900,A[e+24>>>2]=n.getDay();var r=new Date(n.getFullYear(),0,1),i=(n.getTime()-r.getTime())/864e5|0;A[e+28>>>2]=i,A[e+36>>>2]=-60*n.getTimezoneOffset();var o=new Date(n.getFullYear(),6,1).getTimezoneOffset(),a=r.getTimezoneOffset(),s=0|(o!=a&&n.getTimezoneOffset()==Math.min(a,o));A[e+32>>>2]=s;var u=A[Me()+(s?4:0)>>>2];return A[e+40>>>2]=u,e}(t,e)},L:function(t,e,n){return st.varargs=n,0},ia:function(t,e,n,r){},ja:function(t,e,n){},M:function(){return 42},ea:function(t,e,n){return st.varargs=n,0},aa:function(t,e,n){return 0},ca:function(t,e,n,r,i,o){return function(t,e,n,r,i,o){var a;o<<=12;var s=!1;return 0!=(16&r)&&t%65536!=0?-28:0==(32&r)?-52:(a=function(t){t=function(t,e){return 65536*Math.ceil(t/65536)}(t);var e=ze(65536,t);return e?(function(t,e){O.fill(0,t,t+e)}(e,t),e):0}(e))?(s=!0,a>>>=0,st.mappings[a]={malloc:a,len:e,allocated:s,fd:i,prot:n,flags:r,offset:o},a):-48}(t,e,n,r,i,o)},$:function(t,e,n,r){return-48},ba:function(t,e){return function(t,e){t>>>=0;var n=st.mappings[t];return 0!==e&&n?(e===n.len&&(st.mappings[t]=null,n.allocated&&Fe(n.malloc)),0):-28}(t,e)},N:function(t,e,n){st.varargs=n},da:function(t,e){},ga:function(t){},E:function(t){var e=ut[t];delete ut[t];var n=e.rawConstructor,r=e.rawDestructor,i=e.fields;vt([t],i.map((function(t){return t.getterReturnType})).concat(i.map((function(t){return t.setterArgumentType}))),(function(t){var o={};return i.forEach((function(e,n){var r=e.fieldName,a=t[n],s=e.getter,u=e.getterContext,l=t[n+i.length],c=e.setter,f=e.setterContext;o[r]={read:function(t){return a.fromWireType(s(u,t))},write:function(t,e){var n=[];c(f,t,l.toWireType(n,e)),lt(n)}}})),[{name:e.name,fromWireType:function(t){var e={};for(var n in o)e[n]=o[n].read(t);return r(t),e},toWireType:function(t,e){for(var i in o)if(!(i in e))throw new TypeError('Missing field:  "'+i+'"');var a=n();for(i in o)o[i].write(a,e[i]);return null!==t&&t.push(r,a),a},argPackAdvance:8,readValueFromPointer:ct,destructorFunction:r}]}))},U:function(t,e,n,r,i){},la:function(t,e,n,r,i){var o=wt(n);kt(t,{name:e=Tt(e),fromWireType:function(t){return!!t},toWireType:function(t,e){return e?r:i},argPackAdvance:8,readValueFromPointer:function(t){var r;if(1===n)r=k;else if(2===n)r=$;else{if(4!==n)throw new TypeError("Unknown boolean type size: "+e);r=A}return this.fromWireType(r[t>>>o])},destructorFunction:null})},p:function(t,e,n,r,i,o,a,s,u,l,c,f,d){c=Tt(c),o=Bt(i,o),s&&(s=Bt(a,s)),l&&(l=Bt(u,l)),d=Bt(f,d);var p=ht(c);Mt(p,(function(){Kt("Cannot construct "+c+" due to unbound types",[r])})),vt([t,e,n],r?[r]:[],(function(e){var n,i;e=e[0],i=r?(n=e.registeredClass).instancePrototype:Ft.prototype;var a=_t(p,(function(){if(Object.getPrototypeOf(this)!==u)throw new Ct("Use 'new' to construct "+c);if(void 0===f.constructor_body)throw new Ct(c+" has no accessible constructor");var t=f.constructor_body[arguments.length];if(void 0===t)throw new Ct("Tried to invoke ctor of "+c+" with invalid number of parameters ("+arguments.length+") - expected ("+Object.keys(f.constructor_body).toString()+") parameters instead!");return t.apply(this,arguments)})),u=Object.create(i,{constructor:{value:a}});a.prototype=u;var f=new Nt(c,a,u,d,n,o,s,l),h=new Lt(c,f,!0,!1,!1),_=new Lt(c+"*",f,!1,!1,!1),m=new Lt(c+" const*",f,!1,!0,!1);return Rt[t]={pointerType:_,constPointerType:m},Gt(p,a),[h,_,m]}))},v:function(t,e,n,r,i,o){e>0||tt("Assertion failed: "+undefined);var a=Qt(e,n);i=Bt(r,i),vt([],[t],(function(t){var n="constructor "+(t=t[0]).name;if(void 0===t.registeredClass.constructor_body&&(t.registeredClass.constructor_body=[]),void 0!==t.registeredClass.constructor_body[e-1])throw new Ct("Cannot register multiple constructors with identical number of parameters ("+(e-1)+") for class '"+t.name+"'! Overload resolution is currently only performed using the parameter count, not actual type info!");return t.registeredClass.constructor_body[e-1]=function(){Kt("Cannot construct "+t.name+" due to unbound types",a)},vt([],a,(function(r){return r.splice(1,0,null),t.registeredClass.constructor_body[e-1]=ee(n,r,null,i,o),[]})),[]}))},d:function(t,e,n,r,i,o,a,s){var u=Qt(n,r);e=Tt(e),o=Bt(i,o),vt([],[t],(function(t){var r=(t=t[0]).name+"."+e;function i(){Kt("Cannot call "+r+" due to unbound types",u)}e.startsWith("@@")&&(e=Symbol[e.substring(2)]),s&&t.registeredClass.pureVirtualFunctions.push(e);var l=t.registeredClass.instancePrototype,c=l[e];return void 0===c||void 0===c.overloadTable&&c.className!==t.name&&c.argCount===n-2?(i.argCount=n-2,i.className=t.name,l[e]=i):(Vt(l,e,r),l[e].overloadTable[n-2]=i),vt([],u,(function(i){var s=ee(r,i,t,o,a);return void 0===l[e].overloadTable?(s.argCount=n-2,l[e]=s):l[e].overloadTable[n-2]=s,[]})),[]}))},ka:function(t,e){kt(t,{name:e=Tt(e),fromWireType:function(t){var e=re[t].value;return ie(t),e},toWireType:function(t,e){return oe(e)},argPackAdvance:8,readValueFromPointer:ct,destructorFunction:null})},R:function(t,e,n,r){var i=wt(n);function o(){}e=Tt(e),o.values={},kt(t,{name:e,constructor:o,fromWireType:function(t){return this.constructor.values[t]},toWireType:function(t,e){return e.value},argPackAdvance:8,readValueFromPointer:ae(e,i,r),destructorFunction:null}),Mt(e,o)},u:function(t,e,n){var r=se(t,"enum");e=Tt(e);var i=r.constructor,o=Object.create(r.constructor.prototype,{value:{value:n},constructor:{value:_t(r.name+"_"+e,(function(){}))}});i.values[n]=o,i[e]=o},O:function(t,e,n){var r=wt(n);kt(t,{name:e=Tt(e),fromWireType:function(t){return t},toWireType:function(t,e){if("number"!=typeof e&&"boolean"!=typeof e)throw new TypeError('Cannot convert "'+ue(e)+'" to '+this.name);return e},argPackAdvance:8,readValueFromPointer:le(e,r),destructorFunction:null})},o:function(t,e,n,r,i,o){var a=Qt(e,n);t=Tt(t),i=Bt(r,i),Mt(t,(function(){Kt("Cannot call "+t+" due to unbound types",a)}),e-1),vt([],a,(function(n){var r=[n[0],null].concat(n.slice(1));return Gt(t,ee(t,r,null,i,o),e-1),[]}))},z:function(t,e,n,r,i){e=Tt(e),-1===i&&(i=4294967295);var o=wt(n),a=function(t){return t};if(0===r){var s=32-8*n;a=function(t){return t<<s>>>s}}var u=e.includes("unsigned");kt(t,{name:e,fromWireType:a,toWireType:function(t,n){if("number"!=typeof n&&"boolean"!=typeof n)throw new TypeError('Cannot convert "'+ue(n)+'" to '+this.name);if(n<r||n>i)throw new TypeError('Passing a number "'+ue(n)+'" from JS side to C/C++ side to an argument of type "'+e+'", which is outside the valid range ['+r+", "+i+"]!");return u?n>>>0:0|n},argPackAdvance:8,readValueFromPointer:ce(e,o,0!==r),destructorFunction:null})},y:function(t,e,n){var r=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array][e];function i(t){var e=x,n=e[(t>>=2)>>>0],i=e[t+1>>>0];return new r(P,i,n)}kt(t,{name:n=Tt(n),fromWireType:i,argPackAdvance:8,readValueFromPointer:i},{ignoreDuplicateRegistrations:!0})},w:function(t,e,n,r,i,o,a,s,u,l,c,f){n=Tt(n),o=Bt(i,o),s=Bt(a,s),l=Bt(u,l),f=Bt(c,f),vt([t],[e],(function(t){return t=t[0],[new Lt(n,t.registeredClass,!1,!1,!0,t,r,o,s,l,f)]}))},P:function(t,e){var n="std::string"===(e=Tt(e));kt(t,{name:e,fromWireType:function(t){var e,r=x[t>>>2];if(n)for(var i=t+4,o=0;o<=r;++o){var a=t+4+o;if(o==r||0==O[a>>>0]){var s=b(i,a-i);void 0===e?e=s:(e+=String.fromCharCode(0),e+=s),i=a+1}}else{var u=new Array(r);for(o=0;o<r;++o)u[o]=String.fromCharCode(O[t+4+o>>>0]);e=u.join("")}return Fe(t),e},toWireType:function(t,e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));var r="string"==typeof e;r||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||Pt("Cannot pass non-string to std::string");var i=(n&&r?function(){return C(e)}:function(){return e.length})(),o=Se(4+i+1);if(x[(o>>>=0)>>>2]=i,n&&r)T(e,O,o+4,i+1);else if(r)for(var a=0;a<i;++a){var s=e.charCodeAt(a);s>255&&(Fe(o),Pt("String has UTF-16 code units that do not fit in 8 bits")),O[o+4+a>>>0]=s}else for(a=0;a<i;++a)O[o+4+a>>>0]=e[a];return null!==t&&t.push(Fe,o),o},argPackAdvance:8,readValueFromPointer:ct,destructorFunction:function(t){Fe(t)}})},I:function(t,e,n){var r,i,o,a,s;n=Tt(n),2===e?(r=F,i=R,a=V,o=function(){return E},s=1):4===e&&(r=M,i=N,a=I,o=function(){return x},s=2),kt(t,{name:n,fromWireType:function(t){for(var n,i=x[t>>>2],a=o(),u=t+4,l=0;l<=i;++l){var c=t+4+l*e;if(l==i||0==a[c>>>s]){var f=r(u,c-u);void 0===n?n=f:(n+=String.fromCharCode(0),n+=f),u=c+e}}return Fe(t),n},toWireType:function(t,r){"string"!=typeof r&&Pt("Cannot pass non-string to C++ string type "+n);var o=a(r),u=Se(4+o+e);return x[(u>>>=0)>>>2]=o>>s,i(r,u+4,o+e),null!==t&&t.push(Fe,u),u},argPackAdvance:8,readValueFromPointer:ct,destructorFunction:function(t){Fe(t)}})},F:function(t,e,n,r,i,o){ut[t]={name:Tt(e),rawConstructor:Bt(n,r),rawDestructor:Bt(i,o),fields:[]}},x:function(t,e,n,r,i,o,a,s,u,l){ut[t].fields.push({fieldName:Tt(e),getterReturnType:n,getter:Bt(r,i),getterContext:o,setterArgumentType:a,setter:Bt(s,u),setterContext:l})},ma:function(t,e){kt(t,{isVoid:!0,name:e=Tt(e),argPackAdvance:0,fromWireType:function(){},toWireType:function(t,e){}})},k:function(t,e,n){t=fe(t),e=se(e,"emval::as");var r=[],i=oe(r);return A[n>>>2]=i,e.toWireType(r,t)},pa:function(t,e,n,r){t=fe(t);for(var i=de(e,n),o=new Array(e),a=0;a<e;++a){var s=i[a];o[a]=s.readValueFromPointer(r),r+=s.argPackAdvance}return oe(t.apply(void 0,o))},s:function(t,e,n,r,i){return(t=_e[t])(e=fe(e),n=he(n),function(t){var e=[];return A[t>>>2]=oe(e),e}(r),i)},q:function(t,e,n,r){(t=_e[t])(e=fe(e),n=he(n),null,r)},b:ie,r:function(t){return 0===t?oe(me()):(t=he(t),oe(me()[t]))},l:function(t,e){for(var n=de(t,e),r=n[0],i=r.name+"_$"+n.slice(1).map((function(t){return t.name})).join("_")+"$",o=["retType"],a=[r],s="",u=0;u<t-1;++u)s+=(0!==u?", ":"")+"arg"+u,o.push("argType"+u),a.push(n[1+u]);var l,c,f="return function "+ht("methodCaller_"+i)+"(handle, name, destructors, args) {\n",d=0;for(u=0;u<t-1;++u)f+="    var arg"+u+" = argType"+u+".readValueFromPointer(args"+(d?"+"+d:"")+");\n",d+=n[u+1].argPackAdvance;for(f+="    var rv = handle[name]("+s+");\n",u=0;u<t-1;++u)n[u+1].deleteObject&&(f+="    argType"+u+".deleteObject(arg"+u+");\n");return r.isVoid||(f+="    return retType.toWireType(destructors, rv);\n"),f+="};\n",o.push(f),l=te(Function,o).apply(null,a),c=_e.length,_e.push(l),c},C:function(t){return t=he(t),oe(i[t])},m:function(t,e){return oe((t=fe(t))[e=fe(e)])},e:function(t){t>4&&(re[t].refcount+=1)},S:function(t,e){return(t=fe(t))instanceof fe(e)},t:function(t,e,n,r){t=fe(t);var o=ye[e];return o||(o=function(t){for(var e="",n=0;n<t;++n)e+=(0!==n?", ":"")+"arg"+n;var r="return function emval_allocator_"+t+"(constructor, argTypes, args) {\n";for(n=0;n<t;++n)r+="var argType"+n+" = requireRegisteredType(Module['HEAP32'][(argTypes >>> 2) + "+n+'], "parameter '+n+'");\nvar arg'+n+" = argType"+n+".readValueFromPointer(args);\nargs += argType"+n+"['argPackAdvance'];\n";return r+="var obj = new constructor("+e+");\nreturn __emval_register(obj);\n}\n",new Function("requireRegisteredType","Module","__emval_register",r)(se,i,oe)}(e),ye[e]=o),o(t,n,r)},G:function(){return oe([])},n:function(t){return oe(he(t))},J:function(){return oe({})},g:function(t){lt(re[t].value),ie(t)},A:function(t,e,n){t=fe(t),e=fe(e),n=fe(n),t[e]=n},h:function(t,e){return oe((t=se(t,"_emval_take_value")).readValueFromPointer(e))},B:function(t){return oe(typeof(t=fe(t)))},f:function(){tt()},Q:function(t,e){var n;if(0===t)n=Date.now();else{if(1!==t&&4!==t)return 28,A[Re()>>>2]=28,-1;n=ge()}return A[e>>>2]=n/1e3|0,A[e+4>>>2]=n%1e3*1e3*1e3|0,0},c:function(t,e,n){var r=function(t,e){var n;for(ve.length=0,e>>=2;n=O[t++>>>0];){var r=n<105;r&&1&e&&e++,ve.push(r?D[e++>>>1]:A[e>>>0]),++e}return ve}(e,n);return rt[t].apply(null,r)},_:function(){return 4294901760},V:function(t,e,n){O.copyWithin(t>>>0,e>>>0,e+n>>>0)},H:function(t){var e,n=O.length,r=4294901760;if((t>>>=0)>r)return!1;for(var i=1;i<=4;i*=2){var o=n*(1+.2/i);if(o=Math.min(o,t+100663296),we(Math.min(r,((e=Math.max(t,o))%65536>0&&(e+=65536-e%65536),e))))return!0}return!1},X:function(t,e){var n=0;return Te().forEach((function(r,i){var o=e+n;A[t+4*i>>>2]=o,function(t,e,n){for(var r=0;r<t.length;++r)k[e++>>>0]=t.charCodeAt(r);k[e>>>0]=0}(r,o),n+=r.length+1})),0},Y:function(t,e){var n=Te();A[t>>>2]=n.length;var r=0;return n.forEach((function(t){r+=t.length+1})),A[e>>>2]=r,0},D:function(t){return 0},ha:function(t,e,n,r){var i=st.getStreamFromFD(t),o=st.doReadv(i,e,n);return A[r>>>2]=o,0},T:function(t,e,n,r,i){},fa:function(t,e,n,r){for(var i=0,o=0;o<n;o++){for(var a=A[e+8*o>>>2],s=A[e+(8*o+4)>>>2],u=0;u<s;u++)st.printChar(t,O[a+u>>>0]);i+=s}return A[r>>>2]=i,0},K:function(t){},oa:Ee,W:function(t,e,n,r){return Ee(t,e,n,r)},na:function(t,e,n){for(var r=b(e),i="\\!@#$^&*()+=-[]/{}|:<>?,.",o=0,a=i.length;o<a;++o)r=r.replace(new RegExp("\\"+i[o],"g"),"\\"+i[o]);var s={"%A":"%a","%B":"%b","%c":"%a %b %d %H:%M:%S %Y","%D":"%m\\/%d\\/%y","%e":"%d","%F":"%Y-%m-%d","%h":"%b","%R":"%H\\:%M","%r":"%I\\:%M\\:%S\\s%p","%T":"%H\\:%M\\:%S","%x":"%m\\/%d\\/(?:%y|%Y)","%X":"%H\\:%M\\:%S"};for(var u in s)r=r.replace(u,s[u]);var l={"%a":"(?:Sun(?:day)?)|(?:Mon(?:day)?)|(?:Tue(?:sday)?)|(?:Wed(?:nesday)?)|(?:Thu(?:rsday)?)|(?:Fri(?:day)?)|(?:Sat(?:urday)?)","%b":"(?:Jan(?:uary)?)|(?:Feb(?:ruary)?)|(?:Mar(?:ch)?)|(?:Apr(?:il)?)|May|(?:Jun(?:e)?)|(?:Jul(?:y)?)|(?:Aug(?:ust)?)|(?:Sep(?:tember)?)|(?:Oct(?:ober)?)|(?:Nov(?:ember)?)|(?:Dec(?:ember)?)","%C":"\\d\\d","%d":"0[1-9]|[1-9](?!\\d)|1\\d|2\\d|30|31","%H":"\\d(?!\\d)|[0,1]\\d|20|21|22|23","%I":"\\d(?!\\d)|0\\d|10|11|12","%j":"00[1-9]|0?[1-9](?!\\d)|0?[1-9]\\d(?!\\d)|[1,2]\\d\\d|3[0-6]\\d","%m":"0[1-9]|[1-9](?!\\d)|10|11|12","%M":"0\\d|\\d(?!\\d)|[1-5]\\d","%n":"\\s","%p":"AM|am|PM|pm|A\\.M\\.|a\\.m\\.|P\\.M\\.|p\\.m\\.","%S":"0\\d|\\d(?!\\d)|[1-5]\\d|60","%U":"0\\d|\\d(?!\\d)|[1-4]\\d|50|51|52|53","%W":"0\\d|\\d(?!\\d)|[1-4]\\d|50|51|52|53","%w":"[0-6]","%y":"\\d\\d","%Y":"\\d\\d\\d\\d","%%":"%","%t":"\\s"};for(var c in l)r=r.replace(c,"("+c+l[c]+")");var f=[];for(o=r.indexOf("%");o>=0;o=r.indexOf("%"))f.push(r[o+1]),r=r.replace(new RegExp("\\%"+r[o+1],"g"),"");var d=new RegExp("^"+r,"i").exec(b(t));if(d){var p,h=function(){function t(t,e,n){return"number"!=typeof t||isNaN(t)?e:t>=e?t<=n?t:n:e}return{year:t(A[n+20>>>2]+1900,1970,9999),month:t(A[n+16>>>2],0,11),day:t(A[n+12>>>2],1,31),hour:t(A[n+8>>>2],0,23),min:t(A[n+4>>>2],0,59),sec:t(A[n>>>2],0,59)}}(),_=function(t){var e=f.indexOf(t);if(e>=0)return d[e+1]};if((p=_("S"))&&(h.sec=Ae(p)),(p=_("M"))&&(h.min=Ae(p)),p=_("H"))h.hour=Ae(p);else if(p=_("I")){var m=Ae(p);(p=_("p"))&&(m+="P"===p.toUpperCase()[0]?12:0),h.hour=m}if(p=_("Y"))h.year=Ae(p);else if(p=_("y")){var g=Ae(p);(p=_("C"))?g+=100*Ae(p):g+=g<69?2e3:1900,h.year=g}if((p=_("m"))?h.month=Ae(p)-1:(p=_("b"))&&(h.month={JAN:0,FEB:1,MAR:2,APR:3,MAY:4,JUN:5,JUL:6,AUG:7,SEP:8,OCT:9,NOV:10,DEC:11}[p.substring(0,3).toUpperCase()]||0),p=_("d"))h.day=Ae(p);else if(p=_("j"))for(var y=Ae(p),v=Ce(h.year),w=0;w<12;++w){var T=Pe(v?ke:Oe,w-1);y<=T+(v?ke:Oe)[w]&&(h.day=y-T)}else if(p=_("a")){var C=p.substring(0,3).toUpperCase();if(p=_("U")){var P={SUN:0,MON:1,TUE:2,WED:3,THU:4,FRI:5,SAT:6}[C],k=Ae(p);$=0===(O=new Date(h.year,0,1)).getDay()?$e(O,P+7*(k-1)):$e(O,7-O.getDay()+P+7*(k-1)),h.day=$.getDate(),h.month=$.getMonth()}else if(p=_("W")){var O,$;P={MON:0,TUE:1,WED:2,THU:3,FRI:4,SAT:5,SUN:6}[C],k=Ae(p),$=1===(O=new Date(h.year,0,1)).getDay()?$e(O,P+7*(k-1)):$e(O,7-O.getDay()+1+P+7*(k-1)),h.day=$.getDate(),h.month=$.getMonth()}}var E=new Date(h.year,h.month,h.day,h.hour,h.min,h.sec,0);return A[n>>>2]=E.getSeconds(),A[n+4>>>2]=E.getMinutes(),A[n+8>>>2]=E.getHours(),A[n+12>>>2]=E.getDate(),A[n+16>>>2]=E.getMonth(),A[n+20>>>2]=E.getFullYear()-1900,A[n+24>>>2]=E.getDay(),A[n+28>>>2]=Pe(Ce(E.getFullYear())?ke:Oe,E.getMonth()-1)+E.getDate()-1,A[n+32>>>2]=0,t+xe(d[0]).length-1}return 0}},Se=(function(){var t={a:De};function e(t,e){var n,r=t.exports;i.asm=r,U((_=i.asm.qa).buffer),Y=i.asm.va,n=i.asm.ra,q.unshift(n),function(t){if(Z--,i.monitorRunDependencies&&i.monitorRunDependencies(Z),0==Z&&(null!==K&&(clearInterval(K),K=null),Q)){var e=Q;Q=null,e()}}()}function n(t){e(t.instance)}function o(e){return(d||"function"!=typeof fetch?Promise.resolve().then((function(){return nt(B)})):fetch(B,{credentials:"same-origin"}).then((function(t){if(!t.ok)throw"failed to load wasm binary file at '"+B+"'";return t.arrayBuffer()})).catch((function(){return nt(B)}))).then((function(e){return WebAssembly.instantiate(e,t)})).then((function(t){return t})).then(e,(function(t){h("failed to asynchronously prepare wasm: "+t),tt(t)}))}if(Z++,i.monitorRunDependencies&&i.monitorRunDependencies(Z),i.instantiateWasm)try{return i.instantiateWasm(t,e)}catch(t){return h("Module.instantiateWasm callback failed with error: "+t),!1}(d||"function"!=typeof WebAssembly.instantiateStreaming||et(B)||"function"!=typeof fetch?o(n):fetch(B,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,t).then(n,(function(t){return h("wasm streaming compile failed: "+t),h("falling back to ArrayBuffer instantiation"),o(n)}))}))).catch(r)}(),i.___wasm_call_ctors=function(){return(i.___wasm_call_ctors=i.asm.ra).apply(null,arguments)},i._malloc=function(){return(Se=i._malloc=i.asm.sa).apply(null,arguments)}),Fe=i._free=function(){return(Fe=i._free=i.asm.ta).apply(null,arguments)},Re=(i._main=function(){return(i._main=i.asm.ua).apply(null,arguments)},i.___errno_location=function(){return(Re=i.___errno_location=i.asm.wa).apply(null,arguments)}),Ve=i.___getTypeName=function(){return(Ve=i.___getTypeName=i.asm.xa).apply(null,arguments)},Me=(i.___embind_register_native_and_builtin_types=function(){return(i.___embind_register_native_and_builtin_types=i.asm.ya).apply(null,arguments)},i.__get_tzname=function(){return(Me=i.__get_tzname=i.asm.za).apply(null,arguments)}),Ne=i.__get_daylight=function(){return(Ne=i.__get_daylight=i.asm.Aa).apply(null,arguments)},Ie=i.__get_timezone=function(){return(Ie=i.__get_timezone=i.asm.Ba).apply(null,arguments)},We=i.stackAlloc=function(){return(We=i.stackAlloc=i.asm.Ca).apply(null,arguments)},ze=i._memalign=function(){return(ze=i._memalign=i.asm.Da).apply(null,arguments)};function Ue(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}function Ye(t){function e(){je||(je=!0,i.calledRun=!0,y||(it(q),it(L),n(i),i.onRuntimeInitialized&&i.onRuntimeInitialized(),He&&function(t){var e,n,r=i._main,o=(t=t||[]).length+1,a=We(4*(o+1));A[a>>>2]=z(l);for(var s=1;s<o;s++)A[(a>>2)+s>>>0]=z(t[s-1]);A[(a>>2)+o>>>0]=0;try{var u=r(o,a);g=e=u,J(),g=n=e,J()||(i.onExit&&i.onExit(n),y=!0),c(n,new Ue(n))}catch(t){return function(t){if(t instanceof Ue||"unwind"==t)return g;h("exception thrown: "+t),c(1,t)}(t)}}(t),function(){if(i.postRun)for("function"==typeof i.postRun&&(i.postRun=[i.postRun]);i.postRun.length;)t=i.postRun.shift(),G.unshift(t);var t;it(G)}()))}t=t||u,Z>0||(function(){if(i.preRun)for("function"==typeof i.preRun&&(i.preRun=[i.preRun]);i.preRun.length;)t=i.preRun.shift(),H.unshift(t);var t;it(H)}(),Z>0||(i.setStatus?(i.setStatus("Running..."),setTimeout((function(){setTimeout((function(){i.setStatus("")}),1),e()}),1)):e()))}if(i.dynCall_ji=function(){return(i.dynCall_ji=i.asm.Ea).apply(null,arguments)},i.dynCall_viij=function(){return(i.dynCall_viij=i.asm.Fa).apply(null,arguments)},i.dynCall_viiij=function(){return(i.dynCall_viiij=i.asm.Ga).apply(null,arguments)},i.dynCall_viiijj=function(){return(i.dynCall_viiijj=i.asm.Ha).apply(null,arguments)},i.dynCall_viiji=function(){return(i.dynCall_viiji=i.asm.Ia).apply(null,arguments)},i.dynCall_viijji=function(){return(i.dynCall_viijji=i.asm.Ja).apply(null,arguments)},i.dynCall_viijj=function(){return(i.dynCall_viijj=i.asm.Ka).apply(null,arguments)},i.dynCall_viijij=function(){return(i.dynCall_viijij=i.asm.La).apply(null,arguments)},i.dynCall_viiiijii=function(){return(i.dynCall_viiiijii=i.asm.Ma).apply(null,arguments)},i.dynCall_viji=function(){return(i.dynCall_viji=i.asm.Na).apply(null,arguments)},i.dynCall_vijjji=function(){return(i.dynCall_vijjji=i.asm.Oa).apply(null,arguments)},i.dynCall_jiji=function(){return(i.dynCall_jiji=i.asm.Pa).apply(null,arguments)},i.dynCall_iiiiij=function(){return(i.dynCall_iiiiij=i.asm.Qa).apply(null,arguments)},i.dynCall_iiiiijj=function(){return(i.dynCall_iiiiijj=i.asm.Ra).apply(null,arguments)},i.dynCall_iiiiiijj=function(){return(i.dynCall_iiiiiijj=i.asm.Sa).apply(null,arguments)},i.dynCall_viijii=function(){return(i.dynCall_viijii=i.asm.Ta).apply(null,arguments)},Q=function t(){je||Ye(),je||(Q=t)},i.run=Ye,i.preInit)for("function"==typeof i.preInit&&(i.preInit=[i.preInit]);i.preInit.length>0;)i.preInit.pop()();var He=!0;return i.noInitialRun&&(He=!1),Ye(),e.ready}),i={integer:"integer",float:"float",string:"string",boolean:"boolean",date:"date",datetime:"datetime",object:"object"},o={row_pivot:"row_pivots","row-pivot":"row_pivots","row-pivots":"row_pivots",col_pivot:"column_pivots",col_pivots:"column_pivots",column_pivot:"column_pivots","column-pivot":"column_pivots","column-pivots":"column_pivots",filters:"filter",sorts:"sort"},a=["viewport","row_pivots","column_pivots","aggregates","columns","filter","sort","computed_columns","expressions","row_pivot_depth","filter_op"],s=["any","avg","abs sum","count","distinct count","dominant","first by index","last by index","last","high","join","low","mean","median","pct sum parent","pct sum grand total","stddev","sum","sum abs","sum not null","unique","var"],u=["any","count","distinct count","distinct leaf","dominant","first by index","join","last by index","last","unique"],l=["none","asc","desc","col asc","col desc","asc abs","desc abs","col asc abs","col desc abs"],c=[2,0,1,0,1,3,4,3,4],f={string:u,float:s,integer:s,boolean:["any","count","distinct count","distinct leaf","dominant","first by index","last by index","last","unique"],datetime:u,date:u},d={lessThan:"<",greaterThan:">",equals:"==",lessThanOrEquals:"<=",greaterThanOrEquals:">=",doesNotEqual:"!=",isNull:"is null",isNotNull:"is not null",isIn:"in",isNotIn:"not in",contains:"contains",bitwiseAnd:"&",bitwiseOr:"|",and:"and",or:"or",beginsWith:"begins with",endsWith:"ends with"},p=[d.bitwiseAnd,d.bitwiseOr,d.equals,d.doesNotEqual,d.or,d.and,d.isNull,d.isNotNull],h=[d.lessThan,d.greaterThan,d.equals,d.lessThanOrEquals,d.greaterThanOrEquals,d.doesNotEqual,d.isNull,d.isNotNull],_=[d.equals,d.contains,d.doesNotEqual,d.isIn,d.isNotIn,d.beginsWith,d.endsWith,d.isNull,d.isNotNull],m=[d.lessThan,d.greaterThan,d.equals,d.lessThanOrEquals,d.greaterThanOrEquals,d.doesNotEqual,d.isNull,d.isNotNull],g="|",y={string:_,float:h,integer:h,boolean:p,datetime:m,date:m};var v=n(572);function w(t){return t>=1&&t<=8?"integer":19===t?"string":10===t||9===t?"float":11===t?"boolean":12===t?"datetime":13===t?"date":void console.warn(`Unknown type for value ${t} with JS type ${typeof t}`)}function b(t){let e=t;do{for(const n of Object.getOwnPropertyNames(e)){const e=t[n];"constructor"!==n&&"function"==typeof e&&(t[n]=e.bind(t))}}while(e=e!==Object&&Object.getPrototypeOf(e))}String.prototype.includes||(String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;for(var i,o,a=0|e,s=Math.max(a>=0?a:r-Math.abs(a),0);s<r;){if((i=n[s])===(o=t)||"number"==typeof i&&"number"==typeof o&&isNaN(i)&&isNaN(o))return!0;s++}return!1}});class T{constructor(){this.data_formats={row:0,column:1,schema:2},this.format=void 0,this.data=void 0,this.names=void 0,this.types=void 0,this.row_count=void 0}is_format(t){if(Array.isArray(t))return this.data_formats.row;if(Array.isArray(t[Object.keys(t)[0]]))return this.data_formats.column;if("string"==typeof t[Object.keys(t)[0]]||"function"==typeof t[Object.keys(t)[0]])return this.data_formats.schema;throw`Could not determine data format for ${JSON.stringify(t)}, with JS typeof ${typeof t}`}count_rows(t){return this.format===this.data_formats.row?t.length:this.format===this.data_formats.column?t[Object.keys(t)[0]].length:0}get_format(){return this.format}get(t,e){let n;if(this.format===this.data_formats.row){let r=this.data[e];r.hasOwnProperty(t)&&(n=r[t])}else if(this.format===this.data_formats.column)this.data.hasOwnProperty(t)&&(n=this.data[t][e]);else{if(this.format!==this.data_formats.schema)throw`Could not get() from dataset - ${this.data} is poorly formatted.`;n=void 0}return n}marshal(t,e,n){const r=this.names[t];let i=null===(o=this.get(r,e))||"null"===o?null:void 0===o||"undefined"===o?void 0:o;var o;if(null===i)return null;if(void 0!==i){switch(w(n.value)){case"float":case"integer":i=Number(i);break;case"boolean":i="string"==typeof i?"true"===i.toLowerCase():!!i;break;case"datetime":case"date":break;default:i+=""}return i}}clean(){this.names=void 0,this.types=void 0}init(t){this.data=t,this.format=this.is_format(this.data),this.row_count=this.count_rows(this.data);const e={};if(this.format===this.data_formats.row)t.length>0?this.names=Object.keys(t[0]):this.clean.names=[];else if(this.format===this.data_formats.column)this.names=Object.keys(t);else{if(this.format!==this.data_formats.schema)throw`Could not initialize - failed to determine format for ${t}`;this.names=Object.keys(t);for(const n of this.names){const r=(0,v.get_type_config)(t[n]);r.type&&(console.debug(`Converting "${t[n]}" to "${r.type}"`),e[n]=t[n],t[n]=r.type)}}return e}}const C=function(t){let e=[];for(let n=0;n<t.size();n++){let r=t.get(n);e.push(r)}return t.delete(),e},P=function(t){let e={},n=t.keys();for(let r=0;r<n.size();r++){let i=n.get(r);e[i]=t.get(i)}return t.delete(),n.delete(),e},k=function(t,e){for(const n of e)t.push_back(n);return t};function O(t){const e={};return"string"!=typeof t?Object.getOwnPropertyNames(t).forEach((n=>{e[n]=t[n]}),t):e.message=t,e}class ${constructor(t){this.perspective=t,this._tables={},this._views={},this._callback_cache=new Map}init(t){t.config&&(0,v.override_config)(t.config),t.data=["wait_for_response"],this.post(t)}post(t){throw new Error(`Posting ${t} failed - post() not implemented!`)}process(t,e){switch(t.cmd){case"init_profile_thread":this.perspective.initialize_profile_thread();break;case"memory_usage":this.post({id:t.id,data:this.perspective.memory_usage()});break;case"init":this.init(t);break;case"table":if(void 0===t.args[0])this._tables[t.name]=[];else try{const e=this._tables[t.name],n=this.perspective.table(t.args[0],t.options);if(n&&n.then)n.then((n=>{if(this._tables[t.name]=n,e)for(const t of e)this.process(t);this.post({id:t.id,data:t.name})})).catch((e=>this.process_error(t,e)));else{if(this._tables[t.name]=n,e)for(const t of e)this.process(t);this.post({id:t.id,data:t.name})}}catch(e){return void this.process_error(t,e)}break;case"table_generate":(0,eval)(t.args)((function(e){this._tables[t.name]=e,this.post({id:t.id,data:"created!"})}));break;case"table_execute":(0,eval)(t.f)(this._tables[t.name]);break;case"table_method":case"view_method":this.process_method_call(t);break;case"view":const n=this._tables[t.table_name];if(n&&Array.isArray(n))n.push(t),this._views[t.view_name]=[];else try{const n=this._views[t.view_name],r=this._tables[t.table_name].view(t.config);if(r&&r.then)r.then((r=>{if(this._views[t.view_name]=r,this._views[t.view_name].client_id=e,n)for(const t of n)this.process(t);this.post({id:t.id,data:t.view_name})})).catch((e=>this.process_error(t,e)));else{if(this._views[t.view_name]=r,this._views[t.view_name].client_id=e,n)for(const t of n)this.process(t);this.post({id:t.id,data:t.view_name})}}catch(e){return void this.process_error(t,e)}}}process_subscribe(t,e){try{let n;"on"===t.method.slice(0,2)?(n=r=>{let i={id:t.id,data:r};try{if(t.args&&t.args[0]&&"on_update"===t.method&&"row"===t.args[0].mode)return void this.post(i,[r.delta]);this.post(i)}catch(r){console.error(`Removing failed callback to \`${t.method}()\` (presumably due to failed connection)`);const i=t.method.substring(3);e[`remove_${i}`](n)}},t.callback_id&&this._callback_cache.set(t.callback_id,n)):t.callback_id&&(n=this._callback_cache.get(t.callback_id),this._callback_cache.delete(t.callback_id)),n?e[t.method](n,...t.args):console.error(`Callback not found for remote call "${JSON.stringify(t)}"`)}catch(e){return void this.process_error(t,e)}}process_method_call(t){let e,n;const r=t.view_name||t.name;if(e="table_method"===t.cmd?this._tables[r]:this._views[r],e||"view_method"!==t.cmd)if(e&&e.push)e.push(t);else try{if(t.subscribe)return void this.process_subscribe(t,e);n=e[t.method].apply(e,t.args),n instanceof Promise?n.then((e=>this.process_method_call_response(t,e))).catch((e=>this.process_error(t,e))):this.process_method_call_response(t,n)}catch(e){return void this.process_error(t,e)}else this.process_error(t,{message:"View method cancelled"})}process_method_call_response(t,e){"delete"===t.method&&delete this._views[t.name],"to_arrow"===t.method?this.post({id:t.id,data:e},[e]):this.post({id:t.id,data:e})}process_error(t,e){this.post({id:t.id,error:O(e)})}clear_views(t){for(let e of Object.keys(this._views))if(this._views[e].client_id===t){try{this._views[e].delete()}catch(t){console.error(t)}delete this._views[e]}console.debug(`GC ${Object.keys(this._views).length} views in memory`)}}const E={jsonFormatter:{initDataValue:()=>[],initRowValue:()=>({}),initColumnValue:(t,e,n)=>e[n]=[],setColumnValue:(t,e,n,r)=>e[n]=r,addColumnValue:(t,e,n,r)=>e[n].unshift(r),addRow:(t,e)=>t.push(e),formatData:t=>t,slice:(t,e)=>t.slice(e)},jsonTableFormatter:{initDataValue:()=>new Object,initRowValue:()=>{},setColumnValue:(t,e,n,r)=>{t[n]=t[n]||[],t[n].push(r)},addColumnValue:(t,e,n,r)=>{t[n]=t[n]||[],t[n][t[n].length-1].unshift(r)},initColumnValue:(t,e,n)=>{t[n]=t[n]||[],t[n].push([])},addRow:()=>{},formatData:t=>t,slice:(t,e)=>{let n={};for(let r in t)n[r]=t[r].slice(e);return n}}};void 0===n.g.performance&&(n.g.performance={now:Date.now}),"undefined"!=typeof self&&void 0===self.performance&&(self.performance={now:Date.now});const A=new Set;function x(t){let n=t,r=new T;const i=["zero","one","two"];let s={};function u(t){const e=s[t];e&&(e._process(),l(t))}function l(t){delete s[t]}function c(t,e,r,i,o,a,l,c,f){r||(r=""),i||(i=4294967295);const d=(e=n.make_table(e,t,i,r,o,a,l,c,f)).get_pool(),p=e.get_id();return a||o==n.t_op.OP_DELETE?function(t,e){s[e]||(s[e]=t,setTimeout((()=>u(e))))}(d,p):d._process(),e}function f(t,e,r,i,o){this.name=o,this._View=void 0,this.table=t,this.config=r||{},this.view_config=i||new i,this.is_unit_context=""===this.table.index&&0===e&&0===this.view_config.row_pivots.length&&0===this.view_config.column_pivots.length&&0===this.view_config.filter.length&&0===this.view_config.sort.length&&0===this.view_config.expressions.length,this.is_unit_context?this._View=n.make_view_unit(t._Table,o,g,this.view_config,null):0===e?this._View=n.make_view_zero(t._Table,o,g,this.view_config,null):1===e?this._View=n.make_view_one(t._Table,o,g,this.view_config,null):2===e&&(this._View=n.make_view_two(t._Table,o,g,this.view_config,null)),this.ctx=this._View.get_context(),this.column_only=this._View.is_column_only(),this.update_callbacks=this.table.update_callbacks,this.overridden_types=this.table.overridden_types,this._delete_callbacks=[],b(this)}function d(t){let e=[];for(let r=0;r<t.size();r++){let i=t.get(r);e.push(n.scalar_to_val(i,!1,!0)),i.delete()}return t.delete(),e}f.prototype.get_config=function(){return JSON.parse(JSON.stringify(this.config))},f.prototype.delete=function(){l(this.table.get_id()),this._View.delete(),this.ctx.delete(),this.table.views.splice(this.table.views.indexOf(this),1),this.table=void 0;let t=0,e=0;for(;t<this.update_callbacks.length;){let n=this.update_callbacks[t];n.view!==this&&(this.update_callbacks[e++]=n),t++}this.update_callbacks.length=e,this._delete_callbacks.forEach((t=>t()))},f.prototype.sides=function(){return this._View.sides()},f.prototype._num_hidden=function(){let t=0;for(const e of this.config.sort)-1===this.config.columns.indexOf(e[0])&&t++;return t};const p=function(t){let e=[];for(let n=0;n<t.size();n++){let r=t.get(n);e.push(d(r))}return t.delete(),e};f.prototype.schema=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=P(this._View.schema());if(t)for(const t of Object.keys(e)){let n=t.split(g);n=n[n.length-1],this.overridden_types[n]&&(0,v.get_type_config)(this.overridden_types[n]).type===e[t]&&(e[t]=this.overridden_types[n])}return e},f.prototype.expression_schema=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const e=P(this._View.expression_schema());if(t)for(const t of Object.keys(e)){let n=t.split(g);n=n[n.length-1],this.overridden_types[n]&&(0,v.get_type_config)(this.overridden_types[n]).type===e[t]&&(e[t]=this.overridden_types[n])}return e},f.prototype._column_names=function(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return p(this._View.column_names(t,e)).map((t=>t.join(g)))},f.prototype.column_paths=function(){return p(this._View.column_paths()).map((t=>t.join(g)))},f.prototype.get_data_slice=function(t,e,r,o){if(this.is_unit_context)return n.get_data_slice_unit(this._View,t,e,r,o);{const a=this.sides();return n[`get_data_slice_${i[a]}`](this._View,t,e,r,o)}};const h=function(t){t=t||{};const e=this._View.num_columns()+(0===this.sides()?0:1),n=this._View.num_rows(),r=this._num_hidden(),i=this.sides()>0||this.column_only?1:0,o=this.config.viewport?this.config.viewport:{},a=t.start_row||(o.top?o.top:0),s=Math.min(n,void 0!==t.end_row?t.end_row:o.height?a+o.height:n),u=t.start_col||(o.left?o.left:0),l=Math.min(e,(void 0!==t.end_col?t.end_col+i:o.width?u+o.width:e)*(r+1));return t.start_row=Math.floor(a),t.end_row=Math.ceil(s),t.start_col=Math.floor(u),t.end_col=Math.ceil(l),t};f.prototype.get_min_max=function(t){if(this.is_unit_context)return n.get_min_max_unit(this._View,t);{const e=this.sides();return n[`get_min_max_${i[e]}`](this._View,t)}};const _=function(t,e){u(this.table.get_id());const r=(t=h.bind(this)(t)).start_row,o=t.end_row,a=t.start_col,s=t.end_col,l=this._num_hidden(),c=t.formatted,f=!!t.index,d=!!t.id,_=!!t.leaves_only,m=this.sides(),y=0!==m&&!this.column_only,w=i[m];let b;b=this.is_unit_context?n.get_from_data_slice_unit:n[`get_from_data_slice_${w}`];const T=this.get_data_slice(r,o,a,s),C=T.get_column_names(),P=p(C).map((t=>t.join(g))),k=this.schema();let O=e.initDataValue();for(let t=r;t<o;t++){let r=y?T.get_row_path(t):void 0;if(y&&_&&r.size()<this.config.row_pivots.length){r.delete();continue}let i=e.initRowValue();d&&e.initColumnValue(O,i,"__ID__");for(let o=a;o<s;o++){const s=P[o],u=k[s],f=(0,v.get_type_config)(u);if(o===a&&0!==m){if(!this.column_only){e.initColumnValue(O,i,"__ROW_PATH__");for(let t=0;t<r.size();t++){const o=r.get(t),a=n.scalar_to_val(o,!1,!1);o.delete(),e.addColumnValue(O,i,"__ROW_PATH__",a),d&&e.addColumnValue(O,i,"__ID__",a)}}}else{if((o-(m>0?1:0))%(this.config.columns.length+l)>=this.config.columns.length)continue;{let n=b(T,t,o);c&&null!=n&&("datetime"!==u&&"date"!==u||(n=new Date(n),n=n.toLocaleString("en-us",f.format))),e.setColumnValue(O,i,s,n)}}}if(f){const r=T.get_pkeys(t,0);e.initColumnValue(O,i,"__INDEX__");for(let t=0;t<r.size();t++){const o=r.get(t),a=n.scalar_to_val(o,!1,!1);o.delete(),e.addColumnValue(O,i,"__INDEX__",a)}r.delete()}if(d&&0===m){const r=T.get_pkeys(t,0);for(let t=0;t<r.size();t++){const o=r.get(t),a=n.scalar_to_val(o,!1,!1);o.delete(),e.addColumnValue(O,i,"__ID__",a)}r.delete()}r&&r.delete(),e.addRow(O,i)}return T.delete(),e.formatData(O,t.config)},m=function(t,e,n){const r=this.num_rows(),i=e.start_row||0,o=e.end_row||r;let a,s,u=this._column_names().indexOf(t);if(-1===u)return;this.sides()>0&&u++,e.data_slice?a=e.data_slice.get_column_slice(u):(s=this.get_data_slice(i,o,u,u+1),a=s.get_slice());const l=n(a,this._View.get_column_dtype(u),u);return a.delete(),s&&s.delete(),l};function y(t,e){let n=0,r=0;for(;n<t.length;){const i=t[n];e(i,n,t)&&(t[r++]=i),n++}return t.length=r,t}function O(t){this.row_pivots=t.row_pivots||[],this.column_pivots=t.column_pivots||[],this.aggregates=t.aggregates||{},this.columns=t.columns,this.filter=t.filter||[],this.sort=t.sort||[],this.expressions=t.expressions||[],this.filter_op=t.filter_op||"and",this.row_pivot_depth=t.row_pivot_depth,this.column_pivot_depth=t.column_pivot_depth}function x(t,e,n,r){this._Table=t,this.gnode_id=this._Table.get_gnode().get_id(),this._Table.get_pool().set_update_delegate(this),this.name=Math.random()+"",this.initialized=!1,this.index=e,this.limit=n,this.update_callbacks=[],this._delete_callbacks=[],this.views=[],this.overridden_types=r,b(this)}function j(t){let e=[];const n={};for(let i of t){var r;if(i.includes('""')){console.error(`Skipping expression '${i}', as it cannot reference an empty column!`);continue}let t,o={},a={},s=0,u=i.match(/^\/\/(?<alias>.+?)\n/);null!=u&&null!==(r=u.groups)&&void 0!==r&&r.alias&&(t=u.groups.alias.trim()),t&&0!=t.length||(t=i);let l=i.replace(/([a-zA-Z_]+[a-zA-Z0-9_]*)/g,(t=>"true"==t?"True":"false"==t?"False":t));l=l.replace(/\"(.*?[^\\])\"/g,((t,e)=>{if(e=e.replace(/\\"/g,'"'),void 0===o[e]){let t=`COLUMN${s}`;o[e]=t,a[t]=e}return s++,o[e]})),l=l.replace(/'(.*?[^\\])'/g,(t=>`intern(${t})`));const c=(t,e,n,r)=>{const i=t.indexOf(n);return`${t.substring(0,i)}'${r}'${t.substring(i+n.length)}`};l=l.replace(/(bucket|match|match_all|search|indexof)\(.*?,\s*(intern\(\'(.+)\'\)).*\)/g,c),l=l.replace(/(replace_all|replace)\(.*?,\s*(intern\(\'(.*)\'\)),.*\)/g,c);const f=[t,i,l,a];void 0!==n[t]?e[n[t]]=f:(e.push(f),n[t]=e.length-1)}return e}let D;f.prototype.to_columns=function(t){return _.call(this,t,E.jsonTableFormatter)},f.prototype.to_json=function(t){return _.call(this,t,E.jsonFormatter)},f.prototype.to_csv=function(t){u(this.table.get_id());const e=(t=h.bind(this)(t)).start_row,r=t.end_row,i=t.start_col,o=t.end_col,a=this.sides();return this.is_unit_context?n.to_csv_unit(this._View,e,r,i,o):0===a?n.to_csv_zero(this._View,e,r,i,o):1===a?n.to_csv_one(this._View,e,r,i,o):2===a?n.to_csv_two(this._View,e,r,i,o):void 0},f.prototype.col_to_js_typed_array=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};u(this.table.get_id());const r=n.col_to_js_typed_array;return m.call(this,t,e,r)},f.prototype.to_arrow=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this.table.get_id()),t=h.bind(this)(t);const e=t.start_row,r=t.end_row,i=t.start_col,o=t.end_col,a=this.sides();return this.is_unit_context?n.to_arrow_unit(this._View,e,r,i,o):0===a?n.to_arrow_zero(this._View,e,r,i,o):1===a?n.to_arrow_one(this._View,e,r,i,o):2===a?n.to_arrow_two(this._View,e,r,i,o):void 0},f.prototype.num_rows=function(){return u(this.table.get_id()),this._View.num_rows()},f.prototype.num_columns=function(){const t=this._View.num_columns(),e=this._num_hidden();return t-t/(this.config.columns.length+e)*e},f.prototype.get_row_expanded=function(t){return this._View.get_row_expanded(t)},f.prototype.expand=function(t){return this._View.expand(t,this.config.row_pivots.length)},f.prototype.collapse=function(t){return this._View.collapse(t)},f.prototype.set_depth=function(t){return this._View.set_depth(t,this.config.row_pivots.length)},f.prototype._get_step_delta=async function(){let t,e=this._View.get_step_delta(0,2147483647);if(0===e.cells.size())t=this.to_json();else{let n={};for(let t=0;t<e.cells.size();t++)n[e.cells.get(t).row]=!0;n=Object.keys(n);const r=n.map((t=>this.to_json({start_row:Number.parseInt(t),end_row:Number.parseInt(t)+1})));t=[].concat.apply([],r)}return e.cells.delete(),t},f.prototype._get_row_delta=async function(){if(this.is_unit_context)return n.get_row_delta_unit(this._View);{const t=this.sides();return n[`get_row_delta_${i[t]}`](this._View)}},f.prototype.on_update=function(t){let{mode:e="none"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(u(this.table.get_id()),-1===["none","row"].indexOf(e))throw new Error(`Invalid update mode "${e}" - valid modes are "none" and "row".`);"row"===e&&(this._View._get_deltas_enabled()||this._View._set_deltas_enabled(!0)),this.update_callbacks.push({view:this,orig_callback:t,callback:async(n,r)=>{void 0===r[n]&&(r[n]={});let i={port_id:n};"row"===e&&(void 0===r[n].row_delta&&(r[n].row_delta=await this._get_row_delta()),i.delta=r[n].row_delta),t(i)}})},f.prototype.remove_update=function(t){u(this.table.get_id());const e=this.update_callbacks.length;y(this.update_callbacks,(e=>e.orig_callback!==t)),console.assert(e>this.update_callbacks.length,'"callback" does not match a registered updater')},f.prototype.on_delete=function(t){this._delete_callbacks.push(t)},f.prototype.remove_delete=function(t){const e=this._delete_callbacks.length;y(this._delete_callbacks,(e=>e!==t)),console.assert(e>this._delete_callbacks.length,'"callback" does not match a registered delete callbacks')},O.prototype.get_row_pivots=function(){let t=n.make_string_vector();return k(t,this.row_pivots)},O.prototype.get_column_pivots=function(){let t=n.make_string_vector();return k(t,this.column_pivots)},O.prototype.get_columns=function(){let t=n.make_string_vector();return k(t,this.columns)},O.prototype.get_filter=function(){let t=n.make_2d_val_vector();for(let e of this.filter){let r=n.make_val_vector(),i=k(r,e);t.push_back(i)}return t},O.prototype.get_sort=function(){let t=n.make_2d_string_vector();for(let e of this.sort){let r=n.make_string_vector(),i=k(r,e);t.push_back(i)}return t},O.prototype.get_expressions=function(){let t=n.make_2d_val_vector();for(let e of this.expressions){let r=n.make_val_vector();for(let t of e)r.push_back(t);t.push_back(r)}return t},x.prototype.get_id=function(){return this._Table.get_id()},x.prototype.get_pool=function(){return this._Table.get_pool()},x.prototype.make_port=function(){return this._Table.make_port()},x.prototype.remove_port=function(){this._Table.remove_port()},x.prototype._update_callback=function(t){let e={};for(let n in this.update_callbacks)this.update_callbacks[n].callback(t,e)},x.prototype.get_index=function(){return this.index},x.prototype.get_limit=function(){return this.limit},x.prototype.clear=function(){l(this.get_id()),this._Table.reset_gnode(this.gnode_id)},x.prototype.replace=function(t){l(this.get_id()),this._Table.reset_gnode(this.gnode_id),this.update(t),u(this.get_id())},x.prototype.delete=function(){if(this.views.length>0)throw`Cannot delete Table as it still has ${this.views.length} registered View(s).`;l(this.get_id()),this._Table.unregister_gnode(this.gnode_id),this._Table.delete();for(const t of this._delete_callbacks)t()},x.prototype.on_delete=function(t){this._delete_callbacks.push(t)},x.prototype.remove_delete=function(t){const e=this._delete_callbacks.length;y(this._delete_callbacks,(e=>e!==t)),console.assert(e>this._delete_callbacks.length,'"callback" does not match a registered delete callbacks')},x.prototype.size=function(){return u(this._Table.get_id()),this._Table.size()},x.prototype.schema=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this._Table.get_schema(),n=e.columns(),r=e.types(),i={};for(let e=0;e<n.size();e++){const o=n.get(e);"psp_okey"!==o&&(t&&this.overridden_types[o]?i[o]=this.overridden_types[o]:i[o]=w(r.get(e).value))}return e.delete(),n.delete(),r.delete(),i},x.prototype.validate_expressions=function(t){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const r={expression_schema:{},expression_alias:{},errors:{}};if(!t||0===t.length)return r;t=j(t);let i=n.make_2d_val_vector();for(let e of t){let t=n.make_val_vector();for(let n of e)t.push_back(n);i.push_back(t),r.expression_alias[e[0]]=e[1]}const o=n.validate_expressions(this._Table,i),a=o.get_expression_schema(),s=o.get_expression_errors(),u=a.keys();for(let t=0;t<u.size();t++){const n=u.get(t);let i=a.get(n);e&&this.overridden_types[n]&&(i=this.overridden_types[n]),r.expression_schema[n]=i}const l=s.keys();for(let t=0;t<l.size();t++){const e=l.get(t),n=s.get(e);r.errors[e]=n}return l.delete(),u.delete(),s.delete(),a.delete(),o.delete(),r},x.prototype.is_valid_filter=function(t){if(t[1]===S.FILTER_OPERATORS.isNull||t[1]===S.FILTER_OPERATORS.isNotNull)return!0;let e=t[2];if(null===e)return!1;const r=this.schema();return!r[t[0]]||"date"!==r[t[0]]&&"datetime"!==r[t[0]]?null!=e:n.is_valid_datetime(t[2])},x.prototype.view=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this._Table.get_id());let e={};for(const n of Object.keys(t))if(o[n]){if(e[o[n]])throw new Error(`Duplicate configuration parameter "${n}"`);A.has(n)||(console.warn(`Deprecated: "${n}" config parameter, please use "${o[n]}" instead`),A.add(n)),e[o[n]]=t[n]}else if("aggregate"===n){A.has("aggregate")||(console.warn('Deprecated: "aggregate" config parameter has been replaced by "aggregates" and "columns"'),A.add("aggregate")),e.aggregates={},e.columns=[];for(const n of t.aggregate)e.aggregates[n.column]=n.op,e.columns.push(n.column)}else{if(!(a.indexOf(n)>-1))throw new Error(`Unrecognized config parameter "${n}"`);e[n]=t[n]}e.row_pivots=e.row_pivots||[],e.column_pivots=e.column_pivots||[],e.aggregates=e.aggregates||{},e.filter=e.filter||[],e.sort=e.sort||[],e.expressions=e.expressions||[];const n=this.schema();if(e.expressions.length>0&&(e.expressions=j(e.expressions)),void 0===e.columns&&(e.columns=this.columns(),e.expressions.length>0))for(const t of e.expressions)e.columns.push(t[0]);if(e.filter.length>0)for(let t of e.filter){const e=n[t[0]];t[1]===S.FILTER_OPERATORS.isNull||t[1]===S.FILTER_OPERATORS.isNotNull||"date"!==e&&"datetime"!==e||(t[2]=new Date(t[2]))}let r,i=Math.random()+"";r=e.row_pivots.length>0||e.column_pivots.length>0?e.column_pivots&&e.column_pivots.length>0?2:1:0;let s=new O(e),l=new f(this,r,e,s,i);return this.views.push(l),l},x.prototype.update=function(t,e){let i;(e=e||{}).port_id=e.port_id||0;let o=this.columns(),a=this._Table.get_schema(),s=a.types(),u=!1,l=!1;if(i=r,t instanceof ArrayBuffer?(i=new Uint8Array(t),u=!0):"string"==typeof t?(","===t[0]&&(t="_"+t),l=!0,u=!0,i=t):(r.init(t),r.names=o.concat(r.names.filter((t=>"__INDEX__"===t))),r.types=C(s).slice(0,o.length),D&&D(r.row_count)),!u){if(0===i.row_count)return void console.warn("table.update called with no data - ignoring");-1!=r.names.indexOf("__INDEX__")&&(this.index?r.types.push(r.types[r.names.indexOf(this.index)]):r.types.push(n.t_dtype.DTYPE_INT32))}try{const t=n.t_op.OP_INSERT;c(i,this._Table,this.index,this.limit,t,!0,u,l,e.port_id),this.initialized=!0}catch(t){console.error(`Update failed: ${t}`)}finally{a.delete()}},x.prototype.remove=function(t,e){if(!this.index)return void console.error("Cannot call `remove()` on a Table without a user-specified index.");let i;(e=e||{}).port_id=e.port_id||0;let o=this.columns(),a=this._Table.get_schema(),s=a.types(),u=!1;(t=t.map((t=>({[this.index]:t}))))instanceof ArrayBuffer?(i=new Uint8Array(t),u=!0):(r.init(t),r.names=[this.index],r.types=[C(s)[o.indexOf(this.index)]],i=r);try{const t=n.t_op.OP_DELETE;c(i,this._Table,this.index,this.limit,t,!1,u,!1,e.port_id),this.initialized=!0}catch(t){console.error("Remove failed",t)}finally{a.delete()}},x.prototype.columns=function(){let t=this._Table.get_schema(),e=t.columns(),n=[];for(let t=0;t<e.size();t++){let r=e.get(t);"psp_okey"!==r&&n.push(r)}return t.delete(),e.delete(),n},x.prototype.execute=function(t){t(this)};const S={__module__:n,Server:$,worker:function(){return this},initialize_profile_thread:function(){if(void 0===D){let t=0,e=performance.now();setTimeout((function n(){let r=performance.now();console.log(`${(1e3*t/(r-e)).toFixed(2)} msgs/sec`),t=0,e=r,setTimeout(n,5e3)}),5e3),D=function(e){t+=e},console.log("Profiling initialized")}},memory_usage:function(){const t=performance.memory?JSON.parse(JSON.stringify(performance.memory,["totalJSHeapSize","usedJSHeapSize","jsHeapSizeLimit"])):process.memoryUsage();return t.wasmHeap=n.HEAP8.length,t},table:function(t,e){let i;(e=e||{}).index=e.index||null,e.limit=e.limit||null;let o,a=!1,s={},u=!1;if(t instanceof ArrayBuffer||"undefined"!=typeof Buffer&&t instanceof Buffer?(i=new Uint8Array(t),a=!0):"string"==typeof t?(","===t[0]&&(t="_"+t),u=!0,a=!0,i=t):(r.clean(),s=r.init(t),i=r),e.index&&e.limit)throw`Cannot specify both index '${e.index}' and limit '${e.limit}'.`;try{const t=n.t_op.OP_INSERT;return o=c(i,void 0,e.index,e.limit,t,!1,a,u,0),new x(o,e.index,e.limit,s)}catch(t){throw o&&o.delete(),console.error(`Table initialization failed: ${t}`),t}}};for(let t of Object.keys(e))S[t]=e[t];return"undefined"!=typeof self&&self.addEventListener&&new class extends ${constructor(t){super(t),self.addEventListener("message",(t=>this.process(t.data)),!1)}post(t,e){self.postMessage(t,e)}init(t){if("undefined"==typeof WebAssembly)throw new Error("WebAssembly not supported");n({wasmBinary:t.buffer,wasmJSMethod:"native-wasm"}).then((e=>{n=e,super.init(t)}))}}(S),S}let j;j=void 0!==n.g.document&&"undefined"!=typeof WebAssembly?n.g.perspective=x(r({wasmJSMethod:"native-wasm",printErr:t=>console.error(t),print:t=>console.log(t)})):n.g.perspective=x(r)})()})();
//# sourceMappingURL=perspective.worker.js.map